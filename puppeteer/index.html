<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="/images/cjs-favicon.png">

	<title>Puppeteer Testing - CodeceptJS - End 2 End Testing Framework for NodeJS</title>

        <link href="../css/bootstrap-3.0.3.min.css" rel="stylesheet">

        <link rel="stylesheet" href="../css/highlight.css">
        <link href="../css/base.css" rel="stylesheet">
        <link href="../css/extra.css" rel="stylesheet">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-30075781-3', 'auto');
            ga('send', 'pageview');
        </script>
        
        <link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,600,700,900" rel="stylesheet" />
<link href='https://fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700' rel='stylesheet' type='text/css'>
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top navbar-inverse" role="navigation">

        <div class="right hidden-sm hidden-xs hidden-md" style="margin-left: 10px; margin-top: 10px; margin-right: 5px; float:right; text-align: right">
            <a href="https://twitter.com/CodeceptJS" class="twitter-follow-button" data-show-count="false" data-size="large">Follow @CodeceptJS</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
        </div>

    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="..">CodeceptJS</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                
                <li >
                    <a href="..">Index</a>
                </li>
                
            
            
            
                
                <li >
                    <a href="../quickstart/">Quickstart</a>
                </li>
                
            
            
            
                
                <li >
                    <a href="../video/">Video</a>
                </li>
                
            
            
            
                <li class="dropdown active">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Guides <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../basics/">Basics</a>
                        </li>
                    
                        <li >
                            <a href="../acceptance/">Acceptance Testing</a>
                        </li>
                    
                        <li >
                            <a href="../pageobjects/">Page Objects</a>
                        </li>
                    
                        <li class="active">
                            <a href="./">Puppeteer Testing</a>
                        </li>
                    
                        <li >
                            <a href="../nightmare/">Nightmare Testing</a>
                        </li>
                    
                        <li >
                            <a href="../angular/">Protractor Testing</a>
                        </li>
                    
                        <li >
                            <a href="../mobile/">Mobile Testing</a>
                        </li>
                    
                        <li >
                            <a href="../helpers/">Helpers</a>
                        </li>
                    
                        <li >
                            <a href="../data/">Data Management</a>
                        </li>
                    
                        <li >
                            <a href="../bdd/">Behavior Driven Development</a>
                        </li>
                    
                        <li >
                            <a href="../advanced/">Advanced Usage</a>
                        </li>
                    
                        <li >
                            <a href="../hooks/">Plugins & Hooks</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Helpers <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../helpers/WebDriverIO/">WebDriverIO</a>
                        </li>
                    
                        <li >
                            <a href="../helpers/Protractor/">Protractor</a>
                        </li>
                    
                        <li >
                            <a href="../helpers/Puppeteer/">Puppeteer</a>
                        </li>
                    
                        <li >
                            <a href="../helpers/Nightmare/">Nightmare</a>
                        </li>
                    
                        <li >
                            <a href="../helpers/Appium/">Appium</a>
                        </li>
                    
                        <li >
                            <a href="../helpers/REST/">REST</a>
                        </li>
                    
                        <li >
                            <a href="../helpers/ApiDataFactory/">ApiDataFactory</a>
                        </li>
                    
                        <li >
                            <a href="../helpers/FileSystem/">FileSystem</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Reference <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../installation/">Installation</a>
                        </li>
                    
                        <li >
                            <a href="../commands/">Commands</a>
                        </li>
                    
                        <li >
                            <a href="../locators/">Locators</a>
                        </li>
                    
                        <li >
                            <a href="../reports/">Reports</a>
                        </li>
                    
                        <li >
                            <a href="../configuration/">Configuration</a>
                        </li>
                    
                        <li >
                            <a href="../plugins/">Plugins</a>
                        </li>
                    
                        <li >
                            <a href="../translation/">Translation</a>
                        </li>
                    
                        <li >
                            <a href="../docker/">Docker</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                
                <li >
                    <a href="../changelog/">Releases</a>
                </li>
                
            
            

            <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                    Support  <b class="caret"></b>
                </a>
                <ul class="dropdown-menu">
                    <li><a href="https://join.slack.com/t/codeceptjs/shared_invite/enQtMzA5OTM4NDM2MzA4LTNiMTE5YzNlMjQyNWYwZjAzODE3ZTI1MmVkYjY0YTYyNDZmMWJjM2VlODg3NTQzYzM2OGE5ZmIwODFjODk1MzI">Slack</a></li>
                    <li><a href="https://stackoverflow.com/questions/tagged/codeceptjs?mixed=1">Stack Overflow</a></li>
                    <li><a href="https://twitter.com/codeceptjs">Twitter</a></li>
                    <li><a href="http://sdclabs.com/codeceptjs?utm_source=codecept.io&utm_medium=top_2&utm_term=link&utm_campaign=reference">Enterprise Support</a></li>
                </ul>
            </li>

            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">

                    <li class="dropdown promo">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                Services  <b class="caret"></b>
                            </a>
                            <ul class="dropdown-menu">
                                <li><a href="http://sdclabs.com/codeceptjs?utm_source=codecept.io&utm_medium=top_2&utm_term=link&utm_campaign=reference">Consulting &raquo;</a></li>
                                <li><a href="http://sdclabs.com/trainings/web-automation-codeceptjs?utm_source=codecept.io&utm_medium=top_menu&utm_term=link&utm_campaign=reference">Trainings &raquo;</a></li>
                                <li><a href="http://sdclabs.com/codeceptjs?utm_source=codecept.io&utm_medium=top_1&utm_term=link&utm_campaign=reference">Test Automation &raquo;</a></li>
                            </ul>
                        </li>



                <li >
                    <a rel="prev" href="../nightmare/">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
                <li>
                    <a href="https://github.com/codeception/codeceptjs/">
                        
                            <img src="/images/github.png" style="height: 1.2em;" alt="">
                            <i class="fa fa-github"></i>
                        
                        GitHub
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>
        <div class="banner" style="background: #e1b0f6; font-size: 105%; padding: 7px">
  Meet <a href="https://easytesting.io"><b>EasyTesting.io</b></a> - online IDE for CodeceptJS.
| SaaS platform for End-to-End test automation
</div>


        

        <div class="reference">
            <div class="well col-md-3"><div class="bs-sidebar hidden-print" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#robust-chrome-testing-with-puppeteer">Robust Chrome Testing with Puppeteer</a></li>
        
            <li><a href="#setup">Setup</a></li>
        
            <li><a href="#configuring">Configuring</a></li>
        
            <li><a href="#writing-tests">Writing Tests</a></li>
        
            <li><a href="#extending">Extending</a></li>
        
            <li><a href="#done">done()</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-7" role="main">

<h1 id="robust-chrome-testing-with-puppeteer">Robust Chrome Testing with Puppeteer</h1>
<p>Among all Selenium alternatives the most interesting emerging ones are tools developed around Google Chrome <a href="https://chromedevtools.github.io/devtools-protocol/">DevTools Protocol</a>. And the most prominent one is <a href="https://github.com/GoogleChrome/puppeteer">Puppeteer</a>.
It operates over Google Chrome directly without requireing additional tools like ChromeDriver. So tests setup with Puppeteer can be started with npm install only. If you want get faster and simpler to setup tests, Puppeteer would be your choice.</p>
<p>CodeceptJS uses Puppeteer to improve end to end testing experience. No need to learn the syntax of a new tool, all drivers in CodeceptJS share the same API.</p>
<p>Take a look at a sample test:</p>
<pre><code class="js">I.amOnPage('https://github.com');
I.click('Sign in', '//html/body/div[1]/header');
I.see('Sign in to GitHub', 'h1');
I.fillField('Username or email address', 'something@totest.com');
I.fillField('Password', '123456');
I.click('Sign in');
I.see('Incorrect username or password.', '.flash-error');
</code></pre>

<p>It's readable and simple and works using Puppeteer API!</p>
<h2 id="setup">Setup</h2>
<p>To start you need CodeceptJS with Puppeteer packages installed</p>
<pre><code class="bash">npm install -g codeceptjs puppeteer
</code></pre>

<p>Or see <a href="http://codecept.io/installation/">alternative installation options</a>
If you already have CodeceptJS project, just install <code>puppeteer</code> package and enable it in config.</p>
<p>And a basic project initialized</p>
<pre><code class="sh">codeceptjs init
</code></pre>

<p>You will be asked for a Helper to use, you should select Puppeteer and provide url of a website you are testing.</p>
<h2 id="configuring">Configuring</h2>
<p>Make sure <code>Puppeteer</code> helper is enabled in <code>codecept.json</code> config:</p>
<pre><code class="js">{ // ..
  &quot;helpers&quot;: {
    &quot;Puppeteer&quot;: {
      &quot;url&quot;: &quot;http://localhost&quot;,
      &quot;show&quot;: false
    }
  }
  // ..
}
</code></pre>

<p>Turn on the <code>show</code> option if you want to follow test progress in a window. This is very useful for debugging.</p>
<p>Puppeteer uses different strategies to detect if a page is loaded. In configuration use <code>waitForNavigation</code> option for that:</p>
<p>By default it is set to <code>domcontentloaded</code> which waits for <code>DOMContentLoaded</code> event being fired. However, for Single Page Applications it's more useful to set this value to <code>networkidle0</code> which waits for all network connections to be finished.</p>
<pre><code class="js">  &quot;helpers&quot;: {
    &quot;Puppeteer&quot;: {
      &quot;url&quot;: &quot;http://localhost&quot;,
      &quot;waitForNavigation&quot;: &quot;networkidle0&quot;
    }
  }
</code></pre>

<p>When a test runs faster than application it is recommended to increase <code>waitForAction</code> config value.
It will wait for a small amount of time (100ms) by default after each user action is taken.</p>
<p><em>More options are listed in <a href="http://codecept.io/helpers/Puppeteer/">helper reference</a>.</em></p>
<h2 id="writing-tests">Writing Tests</h2>
<p>CodeceptJS test should be created with <code>gt</code> command:</p>
<pre><code class="sh">codeceptjs gt
</code></pre>

<p>As an example we will use <code>ToDoMvc</code> app for testing.</p>
<h3 id="actions">Actions</h3>
<p>Tests consist with a scenario of user's action taken on a page. The most widely used ones are:</p>
<ul>
<li><code>amOnPage</code> - to open a webpage (accepts relative or absolute url)</li>
<li><code>click</code> - to locate a button or link and click on it</li>
<li><code>fillField</code> - to enter a text inside a field</li>
<li><code>selectOption</code>, <code>checkOption</code> - to interact with a form</li>
<li><code>wait*</code> to wait for some parts of page to be fully rendered (important for testing SPA)</li>
<li><code>grab*</code> to get values from page sources</li>
<li><code>see</code>, <code>dontSee</code> - to check for a text on a page</li>
<li><code>seeElement</code>, <code>dontSeeElement</code> - to check for elements on a page</li>
</ul>
<p><em>All actions are listed in <a href="http://codecept.io/helpers/Puppeteer/">helper reference</a>.</em></p>
<p>All actions whicn interact with elements <strong>support CSS and XPath locators</strong>. Actions like <code>click</code> or <code>fillField</code> by locate elements by their name or value on a page:</p>
<pre><code class="js">
// search for link or button
I.click('Login');
// locate field by its label
I.fillField('Name', 'Miles');
// we can use input name
I.fillField('user[email]','miles@davis.com');
</code></pre>

<p>You can also specify the exact locator type with strict locators:</p>
<pre><code class="js">I.click({css: 'button.red'});
I.fillField({name: 'user[email]'},'miles@davis.com');
I.seeElement({xpath: '//body/header'});
</code></pre>

<p>A complete ToDo-MVC test may look like:</p>
<pre><code class="js">Feature('ToDo');

Scenario('create todo item', (I) =&gt; {
  I.amOnPage('http://todomvc.com/examples/react/');
  I.dontSeeElement('.todo-count');
  I.fillField('What needs to be done?', 'Write a guide');
  I.pressKey('Enter');
  I.see('Write a guide', '.todo-list');
  I.see('1 item left', '.todo-count');
});
</code></pre>

<h3 id="grabbers">Grabbers</h3>
<p>If you need to get element's value inside a test you can use <code>grab*</code> methods. They should be used with <code>await</code> operator inside <code>async</code> function:</p>
<pre><code class="js">const assert = require('assert');
Scenario('get value of current tasks', async (I) =&gt; {
  I.createTodo('do 1');
  I.createTodo('do 2');
  let numTodos = await I.grabTextFrom('.todo-count strong');
  assert.equal(2, numTodos);
});
</code></pre>

<h3 id="within">Within</h3>
<p>In case some actions should be taken inside one element (a container or modal window) you can use <code>within</code> block to narrow the scope.
Please take a note that you can't use within inside another within in Puppeteer helper:</p>
<pre><code class="js">within('.todoapp', () =&gt; {
  I.createTodo('my new item');
  I.see('1 item left', '.todo-count');
  I.click('.todo-list input.toggle');
});
I.see('0 items left', '.todo-count');
</code></pre>

<p>CodeceptJS allows you to implement custom actions like <code>I.createTodo</code> or use <strong>PageObjects</strong>. Learn how to improve your tests in <a href="http://codecept.io/pageobjects/">PageObjects</a> guide.</p>
<p><code>within</code> can also work with <a href="../acceptance/#iframes">iframes</a></p>
<p>When running steps inside a within block will be shown with a shift:</p>
<p><img alt="within" src="http://codecept.io/images/within.png" /></p>
<h2 id="extending">Extending</h2>
<p>Puppeteer has a very <a href="https://github.com/GoogleChrome/puppeteer/blob/master/docs/api.md">rich and flexible API</a>. Sure, you can extend your test suites to use the methods listed there. CodeceptJS already prepares some objects for you and you can use them from your you helpers.</p>
<p>Start with creating an <code>MyPuppeteer</code> helper using <code>generate:helper</code> or <code>gh</code> command:</p>
<pre><code class="sh">codeceptjs gh
</code></pre>

<p>Then inside a Helper you can access <code>Puppeteer</code> helper of CodeceptJS.
Let's say you want to create <code>I.renderPageToPdf</code> action. In this case you need to call <code>pdf</code> method of <code>page</code> object</p>
<pre><code class="js">// inside a MyPuppeteer helper
async renderPageToPdf() {
  const page = this.helpers['Puppeteer'].page;
  await page.emulateMedia('screen');
  return page.pdf({path: 'page.pdf'});
}
</code></pre>

<p>The same way you can also access <code>browser</code> object to implement more actions or handle events. <a href="http://codecept.io/helpers/">Learn more about Helpers</a> in the corresponding guide.</p>
<h2 id="done">done()</h2>
<p>Yes, also the <a href="https://github.com/DavertMik/codeceptjs-todomvc-puppeteer">demo project is available on GitHub</a></p></div>
            <div class="col-md-2" class="promo-1">

    <div>

        <h3>Search</h3>
            <script>
                    (function() {
                      var cx = '009959493015473517972:w6bnokjcsq8';
                      var gcse = document.createElement('script');
                      gcse.type = 'text/javascript';
                      gcse.async = true;
                      gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
                      var s = document.getElementsByTagName('script')[0];
                      s.parentNode.insertBefore(gcse, s);
                    })();
                  </script>
                  <gcse:search></gcse:search>

                  <hr>
    </div>

    <div class="promo-banner"  >
                <h3>
                    Enterprise Support
                </h3>

                <p>We help you to develop efficient end to end tests
                    <a href="http://sdclabs.com/codeceptjs?utm_source=codecept.io&utm_medium=right&utm_term=link&utm_campaign=reference">Learn More &raquo;</a>
                </p>
    </div>

</div>
            <div class="clearfix"></div>
        </div>
        

     <footer>
        <div class="container">
          <div class="row">
            <div class="col-md-4">
                <h5>Support:</h5>
                <ul>
                    <li><a href="https://join.slack.com/t/codeceptjs/shared_invite/enQtMzA5OTM4NDM2MzA4LTNiMTE5YzNlMjQyNWYwZjAzODE3ZTI1MmVkYjY0YTYyNDZmMWJjM2VlODg3NTQzYzM2OGE5ZmIwODFjODk1MzI">Slack Channel</a></li>
                    <li><a href="https://codecept.discourse.group">Discussion Group</a></li>
                    <li><a href="https://stackoverflow.com/questions/tagged/codeceptjs?mixed=1">Stack Overflow</a></li>
                    <li><a href="http://sdclabs.com/codeceptjs?utm_source=codecept.io&utm_medium=bottom&utm_term=link&utm_campaign=reference">Commercial Support</a></li>
                </ul>

            </div>

<div class="col-md-4">
          <ul class="imglist">
                    <li class="github"><a href="https://github.com/codeception/codeceptjs"><img src="/images/github.png" alt="GitHub">Codeception/CodeceptJS</a></li>
                    <li class="twitter">
                        <a  href="https://twitter.com/codeceptjs">
                            <img src="/images/twitter.png" alt="">@CodeceptJS
                        </a>
                    </li>
                    </ul>

</div>

            <div class="col-md-4">




                <h4>Our Contributors</h4>
                <div id="contributors"></div>
            </div>

        </div>


        <center>Created by <strong>CodeceptJS Team</strong></center>

</div>

    </footer>


        <script src="../js/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/highlight.pack.js"></script>
        <script src="../js/base.js"></script>

    </body>
</html>